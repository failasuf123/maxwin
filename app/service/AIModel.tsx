// const {
//     GoogleGenerativeAI,
//     HarmCategory,
//     HarmBlockThreshold,
//   } = require("@google/generative-ai");

import { GoogleGenerativeAI } from "@google/generative-ai";

  
  // const apiKey = process.env.GOOGLE_GEMINI_AI_API_KEY;
  const apiKey = "AIzaSyB-xfdrRzcIf3CXCJptsKMz1z6Q0qyYccM";
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1.05,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
  export  const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: Jakarta, for 3 Days for Couple with a Cheap budget. Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Capsule Hotel Bobobox\",\n      \"hotelAddress\": \"Jl. Wahid Hasyim No. 118, Menteng, Central Jakarta City, Jakarta 10310, Indonesia\",\n      \"price\": \"$20-$30 per night\",\n      \"hotelImageUrl\": \"https://www.booking.com/hotel/id/bobobox-wahid-hasyim.html\",\n      \"geoCoordinates\": \"-6.197000, 106.829100\",\n      \"rating\": 4.5,\n      \"description\": \"Modern capsule hotel with shared bathrooms and a communal lounge. Ideal for budget travelers who value cleanliness and convenience.\"\n    },\n    {\n      \"hotelName\": \"RedDoorz Plus @ Cikini\",\n      \"hotelAddress\": \"Jl. Cikini Raya No. 94, Cikini, Menteng, Central Jakarta City, Jakarta 10330, Indonesia\",\n      \"price\": \"$15-$25 per night\",\n      \"hotelImageUrl\": \"https://www.reddoorz.com/hotels/indonesia/jakarta/reddoorz-plus-at-cikini\",\n      \"geoCoordinates\": \"-6.187700, 106.838500\",\n      \"rating\": 4.0,\n      \"description\": \"Simple and clean budget hotel with basic amenities. Located in a convenient area with easy access to public transportation.\"\n    },\n    {\n      \"hotelName\": \"OYO 171 Hotel 88 Thamrin\",\n      \"hotelAddress\": \"Jl. KH. Wahid Hasyim No. 117, Menteng, Central Jakarta City, Jakarta 10310, Indonesia\",\n      \"price\": \"$10-$20 per night\",\n      \"hotelImageUrl\": \"https://www.oyorooms.com/hotels/jakarta/oyo-171-hotel-88-thamrin-5717\",\n      \"geoCoordinates\": \"-6.197200, 106.829000\",\n      \"rating\": 3.5,\n      \"description\": \"Basic budget hotel with minimal amenities. Suitable for those on a very tight budget and prioritize location over luxury.\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"name\": \"Exploring Old Town Charm\",\n      \"plan\": [\n        {\n          \"placeName\": \"Kota Tua (Old Town)\",\n          \"placeDetails\": \"Historic district with Dutch colonial architecture, museums, and a vibrant atmosphere.\",\n          \"placeImageUrl\": \"https://www.google.com/search?q=kota+tua+jakarta&tbm=isch\",\n          \"geoCoordinates\": \"-6.134000, 106.819000\",\n          \"ticketPricing\": \"Free entry to most sites\",\n          \"rating\": 4.5,\n          \"timeTravel\": \"9:00 AM - 1:00 PM\"\n        },\n        {\n          \"placeName\": \"Museum Sejarah Jakarta (Jakarta History Museum)\",\n          \"placeDetails\": \"Learn about Jakarta's rich history and cultural heritage.\",\n          \"placeImageUrl\": \"https://www.google.com/search?q=museum+sejarah+jakarta&tbm=isch\",\n          \"geoCoordinates\": \"-6.133600, 106.820500\",\n          \"ticketPricing\": \"Rp. 5,000 (approx. $0.35)\",\n          \"rating\": 4.0,\n          \"timeTravel\": \"1:30 PM - 3:00 PM\"\n        },\n        {\n          \"placeName\": \"Manneken Pis (Jakarta Version)\",\n          \"placeDetails\": \"Small statue of a boy peeing, a playful landmark in the Old Town.\",\n          \"placeImageUrl\": \"https://www.google.com/search?q=manneken+pis+jakarta&tbm=isch\",\n          \"geoCoordinates\": \"-6.135000, 106.821000\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": 3.5,\n          \"timeTravel\": \"3:30 PM - 4:00 PM\"\n        },\n        {\n          \"placeName\": \"Cafe Batavia\",\n          \"placeDetails\": \"Historic cafe with a colonial ambiance, perfect for a relaxing afternoon.\",\n          \"placeImageUrl\": \"https://www.google.com/search?q=cafe+batavia&tbm=isch\",\n          \"geoCoordinates\": \"-6.133800, 106.820000\",\n          \"ticketPricing\": \"No entry fee\",\n          \"rating\": 4.0,\n          \"timeTravel\": \"4:30 PM - 6:00 PM\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"name\": \"Cultural Immersion\",\n      \"plan\": [\n        {\n          \"placeName\": \"Museum Nasional (National Museum of Indonesia)\",\n          \"placeDetails\": \"Discover Indonesian art, artifacts, and history.\",\n          \"placeImageUrl\": \"https://www.google.com/search?q=museum+nasional+indonesia&tbm=isch\",\n          \"geoCoordinates\": \"-6.175000, 106.824000\",\n          \"ticketPricing\": \"Rp. 10,000 (approx. $0.70)\",\n          \"rating\": 4.5,\n          \"timeTravel\": \"9:00 AM - 12:00 PM\"\n        },\n        {\n          \"placeName\": \"Istiqlal Mosque\",\n          \"placeDetails\": \"Magnificent mosque, the largest in Southeast Asia.\",\n          \"placeImageUrl\": \"https://www.google.com/search?q=istiqlal+mosque&tbm=isch\",\n          \"geoCoordinates\": \"-6.174400, 106.821400\",\n          \"ticketPricing\": \"Free entry\",\n          \"rating\": 4.0,\n          \"timeTravel\": \"12:30 PM - 2:00 PM\"\n        },\n        {\n          \"placeName\": \"Taman Mini Indonesia Indah (TMII)\",\n          \"placeDetails\": \"Cultural park showcasing miniature versions of Indonesian provinces.\",\n          \"placeImageUrl\": \"https://www.google.com/search?q=taman+mini+indonesia+indah&tbm=isch\",\n          \"geoCoordinates\": \"-6.331600, 106.883200\",\n          \"ticketPricing\": \"Rp. 25,000 (approx. $1.75)\",\n          \"rating\": 4.0,\n          \"timeTravel\": \"2:30 PM - 6:00 PM\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"name\": \"Modern Jakarta & Shopping\",\n      \"plan\": [\n        {\n          \"placeName\": \"Monas (National Monument)\",\n          \"placeDetails\": \"Iconic monument symbolizing Indonesia's independence.\",\n          \"placeImageUrl\": \"https://www.google.com/search?q=monas+jakarta&tbm=isch\",\n          \"geoCoordinates\": \"-6.175000, 106.824000\",\n          \"ticketPricing\": \"Rp. 15,000 (approx. $1.05)\",\n          \"rating\": 4.0,\n          \"timeTravel\": \"9:00 AM - 11:00 AM\"\n        },\n        {\n          \"placeName\": \"Grand Indonesia Shopping Mall\",\n          \"placeDetails\": \"Luxury shopping mall with international brands and entertainment options.\",\n          \"placeImageUrl\": \"https://www.google.com/search?q=grand+indonesia+shopping+mall&tbm=isch\",\n          \"geoCoordinates\": \"-6.180000, 106.824000\",\n          \"ticketPricing\": \"Free entry\",\n          \"rating\": 4.0,\n          \"timeTravel\": \"11:30 AM - 3:00 PM\"\n        },\n        {\n          \"placeName\": \"Sarinah\",\n          \"placeDetails\": \"Historical department store with local and international brands.\",\n          \"placeImageUrl\": \"https://www.google.com/search?q=sarinah+jakarta&tbm=isch\",\n          \"geoCoordinates\": \"-6.178000, 106.826000\",\n          \"ticketPricing\": \"Free entry\",\n          \"rating\": 3.5,\n          \"timeTravel\": \"3:30 PM - 5:00 PM\"\n        },\n        {\n          \"placeName\": \"Street Food Tour (Thamrin or Menteng area)\",\n          \"placeDetails\": \"Sample delicious street food and experience the local culinary scene.\",\n          \"placeImageUrl\": \"https://www.google.com/search?q=street+food+jakarta&tbm=isch\",\n          \"geoCoordinates\": \"-6.180000, 106.825000\",\n          \"ticketPricing\": \"Varies depending on food choices\",\n          \"rating\": 4.5,\n          \"timeTravel\": \"5:30 PM - 7:00 PM\"\n        }\n      ]\n    }\n  }\n}\n```\n\n**Explanation of the JSON format:**\n\n* **hotelOptions:** This section provides details of budget-friendly hotels in Jakarta. Each entry contains:\n    * **hotelName:** The name of the hotel.\n    * **hotelAddress:** The physical address.\n    * **price:** Estimated price range per night.\n    * **hotelImageUrl:** URL to an image of the hotel.\n    * **geoCoordinates:** Latitude and longitude for location on a map.\n    * **rating:** Average customer rating (out of 5).\n    * **description:** A brief summary of the hotel's features and target audience.\n\n* **itinerary:** This section outlines a 3-day itinerary for a couple, split into daily plans:\n    * **day1:**  \"Exploring Old Town Charm\" - focuses on historic sites and a relaxed atmosphere.\n    * **day2:**  \"Cultural Immersion\" - delves into Indonesian culture through museums and landmarks.\n    * **day3:**  \"Modern Jakarta & Shopping\" - explores contemporary Jakarta, including shopping malls and local street food.\n\n**Within each day's plan:**\n\n* **placeName:** The name of the location.\n* **placeDetails:** A brief description of the location's significance or attractions.\n* **placeImageUrl:** URL to an image representing the location.\n* **geoCoordinates:** Latitude and longitude for mapping.\n* **ticketPricing:** Estimated cost of entry (if applicable).\n* **rating:** Average user rating (if available).\n* **timeTravel:** Recommended time to spend at the location (based on a typical couple's pace).\n\n**Using the JSON:**\n\nThis JSON data can be used in various ways:\n\n* **Travel Planning Website/App:** Easily integrate this data into your interface to display hotel options, itinerary plans, and interactive maps.\n* **Custom Itinerary Generator:** Create a program that lets users select their interests, and the JSON data can be used to generate a customized itinerary.\n* **Data Analysis:** Extract insights from the data, such as popular attractions, average hotel prices, or travel trends.\n\n**Remember:** \n\n* This itinerary provides a general framework, and you can adjust it based on your specific interests and budget.\n* Prices are approximate and can vary depending on the time of year and booking platform.\n* Always research attractions and transportation options for the most up-to-date information.\n"},
          ],
        },
      ],
    });
  

